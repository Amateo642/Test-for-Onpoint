<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        .wrapper {
            height: 400px;
            width: 600px;
            position: relative;
        }

        .content-scrollable {
            height: 100%;
            overflow: hidden;
            padding: 5px;
        }

        .track {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 3px;
            width: 14px;
            background-color: #c5c5c5;
        }

        .bar {
            height: 20px;
            width: 20px;
            background: red;
            position: absolute;
            left: -3px;
        }

        .content {
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <div class="wrapper">

        <div class="track">
            <div class="bar"></div>
        </div>

        <div class="content-scrollable">
            <div class="content">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Debitis, eaque vitae. Error distinctio ipsam dolores quas
                voluptatibus vitae earum, obcaecati unde dicta ea dolorem similique, ratione ad! Tempora, dolores. Corporis!
                Suscipit corrupti quo voluptas cumque blanditiis, omnis perspiciatis nisi! Debitis officia eos aliquam minima
                tempore fugiat quam alias. Suscipit iure distinctio possimus iusto eveniet et necessitatibus dolorum praesentium
                enim asperiores!
                Dolore nostrum distinctio nihil inventore voluptatem repellendus dolor, tenetur et asperiores vero laboriosam
                debitis odio optio non velit illum iste unde quos commodi! Debitis qui omnis ex ad magni voluptatum?
                Ullam maxime perspiciatis aut officiis rem voluptate, reiciendis alias! Cumque possimus in soluta dicta placeat,
                explicabo aliquid. Eum qui incidunt vitae quas asperiores, corporis repellat ex fuga. Aliquam, reprehenderit
                repellat?
                Ducimus adipisci blanditiis fugit! Aspernatur blanditiis recusandae nisi amet quisquam cumque, veniam magni itaque
                beatae eius. Neque sint quae beatae, libero fugiat error corrupti impedit excepturi enim accusantium doloribus
                veniam!
                Quibusdam eum voluptas error distinctio, aliquam asperiores labore facere! Est quae excepturi ducimus dolorum dicta
                harum temporibus natus expedita nihil incidunt reiciendis nesciunt, dolores itaque aliquam, vel deleniti ab minima?
                Adipisci neque earum, doloremque distinctio cum perferendis ad temporibus fugiat labore minus odio facilis, alias
                omnis dolores. Velit, dolorem error vitae a reprehenderit provident veniam aut, laborum quae laudantium asperiores.
                Voluptatum tempore quis eaque numquam facilis maiores ratione optio nam voluptatibus! Ipsam repudiandae facere
                pariatur doloribus omnis ea corrupti asperiores eum iure ex, ducimus animi ratione temporibus? Inventore, neque
                ipsam!
                Assumenda tempore magni voluptatum fugit itaque eligendi aliquam perferendis eaque impedit vero, sunt debitis
                aspernatur nulla molestiae rem pariatur explicabo iusto maiores quasi necessitatibus dolorum! Quo, eum. Tempora,
                deleniti officia!
                Voluptatem iure tempore minima. Eligendi repellat dolorem neque voluptatum, veritatis nostrum ex saepe ipsam cum
                odit quis fugit quia quo asperiores vero optio atque assumenda. Voluptatem fuga mollitia quisquam ex?
                Nemo quaerat in odio sit veniam hic minima. Veritatis praesentium cumque suscipit sit tempore beatae quas hic ipsa!
                Quae libero nulla maiores non amet repellat adipisci doloremque ipsum et alias!
                Ratione alias aperiam, exercitationem incidunt debitis eos quod eligendi odit omnis ut dolorum, nesciunt facilis
                asperiores magnam tempora quas necessitatibus molestiae quidem eum cupiditate veritatis nostrum provident fuga cum!
                Iusto.
                Numquam id totam aperiam quia nulla doloremque laudantium voluptate ab at, eligendi magnam? Veniam necessitatibus
                quae nostrum? Maxime nulla, impedit hic voluptatum accusantium mollitia in harum, dicta, magni cupiditate
                voluptates.
                Voluptatum praesentium fugiat esse nostrum porro ab quis. Inventore iusto deserunt delectus similique, atque a quia
                reprehenderit unde ratione modi magnam fuga molestiae est doloribus. Inventore, iure! A, tenetur ab?
                Ducimus laborum odit voluptate enim laudantium officiis ea? Unde commodi nemo cum cupiditate optio, laborum quis non
                expedita doloribus officia, veritatis similique, blanditiis repellendus. Quos hic sit incidunt eveniet tempore.
                Et soluta nihil saepe recusandae tempore molestiae officia, reiciendis voluptas cum, corrupti aliquam? Ducimus
                tenetur unde sunt similique, iure laboriosam consequuntur vel necessitatibus incidunt facilis magnam sint natus
                delectus fugiat.
                Ipsa pariatur possimus dicta quasi officia maiores velit odit fugit obcaecati nisi quas, delectus veritatis. Quia
                quisquam quod et aperiam incidunt, cupiditate sunt. Illum, minus sapiente eum quia nemo fugiat.
                Expedita vero blanditiis fugiat provident veritatis rem debitis eligendi. Est nulla unde optio voluptas, possimus
                deleniti? Magnam earum quo ex ad vitae expedita? Beatae voluptas velit, fugiat odio illo neque?
                Id debitis repellendus unde numquam odio cupiditate adipisci quam vel voluptas sequi modi voluptatibus quisquam quas
                nam ducimus quae laudantium, praesentium et veritatis. Quas illo, ea aliquid sapiente recusandae consequatur!
                Nam explicabo, dignissimos molestias iusto tempore nobis adipisci cum recusandae voluptatibus consectetur
                perspiciatis incidunt ipsa deleniti magni modi quia dolor. Earum ut, officia cumque hic sed corrupti est eos
                quisquam.
                Doloribus nisi, placeat molestiae vel ullam amet magnam molestias obcaecati nemo, eum asperiores praesentium ab
                necessitatibus! Dolores id aliquid sed. Qui illo exercitationem illum sunt magni! Sunt perspiciatis quia dolor?
                Quo, accusantium ex eveniet explicabo culpa libero doloribus minus, voluptate neque sapiente eius molestiae
                quibusdam doloremque, ipsam laudantium veritatis obcaecati saepe quasi. Aperiam accusantium odio officia nisi vitae
            </div>
        </div>
    </div>
    
    <script>
        const trackEl = document.querySelector('.track');
        const barEl = document.querySelector('.bar');
        const contentEl = document.querySelector('.content');
        const wrapperEl = document.querySelector('.wrapper');
        const contentScrollableEl = document.querySelector('.content-scrollable');

        const contentHeight = contentEl.getBoundingClientRect().height;
        const contentScrollableHeight = contentScrollableEl.getBoundingClientRect().height;
        const offsetMax = wrapperEl.getBoundingClientRect().height - barEl.getBoundingClientRect().height;
        const trackElTop = trackEl.getBoundingClientRect().top;

        function setBarOffset(offset) { //отступ бар с учетом мин и макс
            if (offset < 0) offset = 0;
            if (offset > offsetMax) offset = offsetMax;
            barEl.style.top = `${offset}px`;
        }

        function handleMouseDown(e) { //подписываемся на событие перетаскивания и отпускания мышки
            document.addEventListener('mousemove', handleDrag);
            document.addEventListener('mouseup', handleMouseUp);
            document.addEventListener('touchmove', handleTouchDrag);
            document.addEventListener('touchend', handleMouseUp);
        }

        function handleDrag(e) {
            e.preventDefault();
            const offset = e.pageY - trackElTop;
            setBarOffset(offset);
            const dragPerc = offset / offsetMax;
            const scrollPos = dragPerc * (contentHeight - contentScrollableHeight);
            contentScrollableEl.scrollTop = scrollPos;
        }

        function handleMouseUp(e) {
            document.removeEventListener('mousemove', handleDrag);
            document.removeEventListener('mouseup', handleMouseUp);
            document.removeEventListener('touchmove', handleTouchDrag);
            document.removeEventListener('touchend', handleMouseUp);
            
        }

        function handleScroll(e) {
            const scrollPos = contentScrollableEl.scrollTop = contentScrollableEl.scrollTop + e.deltaY;
            const dragPerc = scrollPos / (contentHeight - contentScrollableHeight);
            const offset = dragPerc * offsetMax;
            setBarOffset(offset);
        }

        function handleTouchDrag(e) {
            const offset = e.changedTouches[0].pageY - trackElTop;
            setBarOffset(offset);
            const dragPerc = offset / offsetMax;
            const scrollPos = dragPerc * (contentHeight - contentScrollableHeight);
            contentScrollableEl.scrollTop = scrollPos;
        }

        barEl.addEventListener('mousedown', handleMouseDown);
        barEl.addEventListener('touchstart', handleMouseDown);
        contentScrollableEl.addEventListener('wheel', handleScroll);
        contentScrollableEl.addEventListener('touchmove', handleScroll);
        //touchmove, touchstart, touchend для телефон overflow: hidden-scroll


        /*changedTouches: TouchList
            0: Touch
            clientX: 41
            clientY: 208*/

    </script>
</body>
</html>